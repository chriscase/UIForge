"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react/jsx-runtime"),l=require("react"),ht=({variant:t="primary",size:r="medium",children:s,className:c="",...d})=>{const v="uiforge-button",u=`${v}--${t}`,x=`${v}--${r}`,k=`${v} ${u} ${x} ${c}`.trim();return e.jsx("button",{className:k,...d,children:s})},ut=({columns:t,data:r,selectable:s=!1,selectedRows:c,getRowKey:d=(ee,J)=>J,onSelectionChange:v,onCellEdit:u,actionButtons:x=[],searchable:k=!1,searchPlaceholder:Q="Search...",onSearch:W,customFilter:O,pagination:h,onPageChange:U,onPageSizeChange:D,pageSizeOptions:G=[10,25,50,100],className:E="",loading:N=!1,emptyMessage:Z="No data available"})=>{const[ee,J]=l.useState(new Set),[C,V]=l.useState(""),[w,R]=l.useState(null),[H,a]=l.useState(""),p=c??ee,f=l.useMemo(()=>!k||!C?r:r.filter(n=>O?O(n,C):Object.values(n).some(y=>y==null?!1:String(y).toLowerCase().includes(C.toLowerCase()))),[r,C,k,O]),j=l.useMemo(()=>{if(!h||h.serverSide)return f;const n=h.currentPage*h.pageSize,y=n+h.pageSize;return f.slice(n,y)},[f,h]),P=l.useMemo(()=>h?h.serverSide&&h.totalItems!==void 0?Math.ceil(h.totalItems/h.pageSize):Math.ceil(f.length/h.pageSize):1,[h,f.length]),F=l.useCallback(()=>r.filter((n,y)=>{const M=d(n,y);return p.has(M)}),[r,p,d]),q=l.useCallback(n=>{const y=new Set;n&&j.forEach(M=>{const _=r.indexOf(M),te=d(M,_);y.add(te)}),c===void 0&&J(y),v?.(y,n?j:[])},[j,r,d,v,c]),X=l.useCallback((n,y,M)=>{const _=new Set(p);M?_.add(n):_.delete(n),c===void 0&&J(_);const te=r.filter(($,le)=>{const ie=d($,le);return _.has(ie)});v?.(_,te)},[p,r,d,v,c]),se=l.useCallback(n=>{V(n),W?.(n)},[W]),o=l.useCallback((n,y,M)=>{R({rowKey:n,columnKey:y}),a(M)},[]),S=l.useCallback((n,y,M)=>{u?.(n,y,H,M),R(null),a("")},[H,u]),g=l.useCallback(()=>{R(null),a("")},[]),I=l.useCallback(n=>{h&&U?.(n,h.pageSize)},[h,U]),T=l.useCallback(n=>{D?.(n),h&&U?.(0,n)},[D,U,h]),B=l.useMemo(()=>j.length===0?!1:j.every(n=>{const y=r.indexOf(n),M=d(n,y);return p.has(M)}),[j,p,r,d]),ce=l.useMemo(()=>j.length===0?!1:j.some(y=>{const M=r.indexOf(y),_=d(y,M);return p.has(_)})&&!B,[j,p,B,r,d]),m="uiforge-grid";return e.jsxs("div",{className:`${m} ${E}`.trim(),children:[(k||x.length>0)&&e.jsxs("div",{className:`${m}__toolbar`,children:[k&&e.jsx("div",{className:`${m}__search`,children:e.jsx("input",{type:"text",className:`${m}__search-input`,placeholder:Q,value:C,onChange:n=>se(n.target.value),"aria-label":"Search"})}),x.length>0&&e.jsx("div",{className:`${m}__actions`,children:x.map((n,y)=>{const M=n.disabled||n.requiresSelection&&p.size===0;return e.jsx("button",{className:`${m}__action-button ${m}__action-button--${n.variant||"primary"}`,onClick:()=>n.onClick(F()),disabled:M,children:n.label},y)})})]}),e.jsx("div",{className:`${m}__table-container`,children:e.jsxs("table",{className:`${m}__table`,role:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[s&&e.jsx("th",{className:`${m}__header-cell ${m}__header-cell--checkbox`,children:e.jsx("input",{type:"checkbox",checked:B,ref:n=>{n&&(n.indeterminate=ce)},onChange:n=>q(n.target.checked),"aria-label":"Select all rows"})}),t.map(n=>e.jsx("th",{className:`${m}__header-cell`,style:{width:n.width},children:n.header},n.key))]})}),e.jsx("tbody",{children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:t.length+(s?1:0),className:`${m}__loading-cell`,children:"Loading..."})}):j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:t.length+(s?1:0),className:`${m}__empty-cell`,children:Z})}):j.map((n,y)=>{const M=r.indexOf(n),_=d(n,M),te=p.has(_);return e.jsxs("tr",{className:`${m}__row ${te?`${m}__row--selected`:""}`,children:[s&&e.jsx("td",{className:`${m}__cell ${m}__cell--checkbox`,children:e.jsx("input",{type:"checkbox",checked:te,onChange:$=>X(_,n,$.target.checked),"aria-label":`Select row ${y+1}`})}),t.map($=>{const le=$.field?n[$.field]:void 0,ie=w?.rowKey===_&&w?.columnKey===$.key;return e.jsx("td",{className:`${m}__cell`,children:ie?e.jsxs("div",{className:`${m}__edit-cell`,children:[e.jsx("input",{type:"text",className:`${m}__edit-input`,value:String(H??""),onChange:re=>a(re.target.value),onKeyDown:re=>{re.key==="Enter"?S(_,$.key,n):re.key==="Escape"&&g()},autoFocus:!0,"aria-label":`Edit ${$.header}`}),e.jsx("button",{className:`${m}__edit-button ${m}__edit-button--save`,onClick:()=>S(_,$.key,n),"aria-label":"Save",children:"âœ“"}),e.jsx("button",{className:`${m}__edit-button ${m}__edit-button--cancel`,onClick:g,"aria-label":"Cancel",children:"âœ•"})]}):e.jsx("div",{className:`${m}__cell-content ${$.editable?`${m}__cell-content--editable`:""}`,onClick:()=>{$.editable&&o(_,$.key,le)},onKeyDown:re=>{$.editable&&(re.key==="Enter"||re.key===" ")&&o(_,$.key,le)},tabIndex:$.editable?0:void 0,role:$.editable?"button":void 0,"aria-label":$.editable?`Edit ${$.header}`:void 0,children:$.render?$.render(le,n,M):String(le??"")})},$.key)})]},_)})})]})}),h&&P>1&&e.jsxs("div",{className:`${m}__pagination`,children:[e.jsx("div",{className:`${m}__pagination-info`,children:h.serverSide&&h.totalItems!==void 0?e.jsxs(e.Fragment,{children:["Showing ",h.currentPage*h.pageSize+1," to"," ",Math.min((h.currentPage+1)*h.pageSize,h.totalItems)," ","of ",h.totalItems," items"]}):e.jsxs(e.Fragment,{children:["Showing ",h.currentPage*h.pageSize+1," to"," ",Math.min((h.currentPage+1)*h.pageSize,f.length)," ","of ",f.length," items"]})}),e.jsxs("div",{className:`${m}__pagination-controls`,children:[e.jsx("button",{className:`${m}__pagination-button`,onClick:()=>I(h.currentPage-1),disabled:h.currentPage===0,"aria-label":"Previous page",children:"â€¹"}),Array.from({length:P},(n,y)=>y).map(n=>n===0||n===P-1||Math.abs(n-h.currentPage)<=1?e.jsx("button",{className:`${m}__pagination-button ${n===h.currentPage?`${m}__pagination-button--active`:""}`,onClick:()=>I(n),"aria-label":`Page ${n+1}`,"aria-current":n===h.currentPage?"page":void 0,children:n+1},n):n===h.currentPage-2||n===h.currentPage+2?e.jsx("span",{className:`${m}__pagination-ellipsis`,children:"..."},n):null),e.jsx("button",{className:`${m}__pagination-button`,onClick:()=>I(h.currentPage+1),disabled:h.currentPage>=P-1,"aria-label":"Next page",children:"â€º"})]}),e.jsxs("div",{className:`${m}__page-size`,children:[e.jsx("label",{htmlFor:"page-size-select",children:"Items per page:"}),e.jsx("select",{id:"page-size-select",className:`${m}__page-size-select`,value:h.pageSize,onChange:n=>T(Number(n.target.value)),children:G.map(n=>e.jsx("option",{value:n,children:n},n))})]})]})]})},ft=()=>`block-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,de=(t="paragraph")=>({id:ft(),type:t,content:"",format:{}}),xt=({initialBlocks:t=[],onChange:r,placeholder:s="Start typing...",readOnly:c=!1,className:d="",maxHeight:v})=>{const[u,x]=l.useState(t.length>0?t:[de()]),[k,Q]=l.useState(null),[W,O]=l.useState(null),[h,U]=l.useState(!1),D=l.useRef(null);l.useEffect(()=>{r&&r(u)},[u,r]);const G=l.useCallback((a,p)=>{x(f=>f.map(j=>j.id===a?{...j,...p}:j))},[]),E=l.useCallback((a="paragraph",p)=>{const f=de(a);x(j=>{if(!p)return[...j,f];const P=j.findIndex(q=>q.id===p),F=[...j];return F.splice(P+1,0,f),F}),Q(f.id)},[]),N=l.useCallback(a=>{x(p=>{const f=p.filter(j=>j.id!==a);return f.length>0?f:[de()]})},[]),Z=l.useCallback((a,p)=>{x(f=>{const j=f.findIndex(X=>X.id===a),P=f.findIndex(X=>X.id===p);if(j===-1||P===-1)return f;const F=[...f],[q]=F.splice(j,1);return F.splice(P,0,q),F})},[]),ee=l.useCallback((a,p)=>{c||(O(p),a.dataTransfer.effectAllowed="move")},[c]),J=l.useCallback(a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},[]),C=l.useCallback((a,p)=>{a.preventDefault(),W&&W!==p&&Z(W,p),O(null)},[W,Z]),V=l.useCallback(()=>{O(null)},[]),w=l.useCallback(a=>{k&&x(p=>p.map(f=>{if(f.id===k){const j=f.format||{};return{...f,format:{...j,[a]:!j[a]}}}return f}))},[k]),R=l.useCallback((a,p)=>{G(a,{type:p})},[G]),H=l.useCallback((a,p)=>{if(!c){if((a.metaKey||a.ctrlKey)&&a.key==="b")a.preventDefault(),w("bold");else if((a.metaKey||a.ctrlKey)&&a.key==="i")a.preventDefault(),w("italic");else if((a.metaKey||a.ctrlKey)&&a.key==="u")a.preventDefault(),w("underline");else if(a.key==="Enter"&&!a.shiftKey){const f=u.find(j=>j.id===p);f&&f.type!=="code"&&(a.preventDefault(),E("paragraph",p))}else if(a.key==="Backspace"){const f=u.find(j=>j.id===p);f&&!f.content&&u.length>1&&(a.preventDefault(),N(p))}}},[c,u,w,E,N]);return e.jsxs("div",{className:`uiforge-blocks-editor ${d}`,ref:D,style:{maxHeight:v},children:[!c&&h&&k&&e.jsx(gt,{selectedBlock:u.find(a=>a.id===k),onFormatToggle:w,onBlockTypeChange:a=>R(k,a)}),e.jsx("div",{className:"uiforge-blocks-editor__content",children:u.map((a,p)=>e.jsx(mt,{block:a,isSelected:k===a.id,isDragging:W===a.id,readOnly:c,placeholder:p===0&&u.length===1?s:void 0,onSelect:()=>{Q(a.id),U(!0)},onChange:f=>G(a.id,f),onDelete:()=>N(a.id),onDragStart:f=>ee(f,a.id),onDragOver:J,onDrop:f=>C(f,a.id),onDragEnd:V,onKeyDown:f=>H(f,a.id)},a.id))}),!c&&e.jsx(pt,{onAddBlock:E})]})},gt=({selectedBlock:t,onFormatToggle:r,onBlockTypeChange:s})=>{if(!t)return null;const c=t.format||{};return e.jsxs("div",{className:"uiforge-blocks-editor__toolbar",role:"toolbar","aria-label":"Text formatting",children:[e.jsx("div",{className:"uiforge-blocks-editor__toolbar-group",children:e.jsxs("select",{value:t.type,onChange:d=>s(d.target.value),className:"uiforge-blocks-editor__toolbar-select","aria-label":"Block type",children:[e.jsx("option",{value:"paragraph",children:"Paragraph"}),e.jsx("option",{value:"heading1",children:"Heading 1"}),e.jsx("option",{value:"heading2",children:"Heading 2"}),e.jsx("option",{value:"heading3",children:"Heading 3"}),e.jsx("option",{value:"list",children:"List"}),e.jsx("option",{value:"quote",children:"Quote"}),e.jsx("option",{value:"code",children:"Code"}),e.jsx("option",{value:"image",children:"Image"})]})}),e.jsx("div",{className:"uiforge-blocks-editor__toolbar-divider"}),e.jsxs("div",{className:"uiforge-blocks-editor__toolbar-group",children:[e.jsx("button",{type:"button",className:`uiforge-blocks-editor__toolbar-button ${c.bold?"active":""}`,onClick:()=>r("bold"),title:"Bold (Ctrl+B)","aria-label":"Bold","aria-pressed":c.bold,children:e.jsx("strong",{children:"B"})}),e.jsx("button",{type:"button",className:`uiforge-blocks-editor__toolbar-button ${c.italic?"active":""}`,onClick:()=>r("italic"),title:"Italic (Ctrl+I)","aria-label":"Italic","aria-pressed":c.italic,children:e.jsx("em",{children:"I"})}),e.jsx("button",{type:"button",className:`uiforge-blocks-editor__toolbar-button ${c.underline?"active":""}`,onClick:()=>r("underline"),title:"Underline (Ctrl+U)","aria-label":"Underline","aria-pressed":c.underline,children:e.jsx("u",{children:"U"})}),e.jsx("button",{type:"button",className:`uiforge-blocks-editor__toolbar-button ${c.code?"active":""}`,onClick:()=>r("code"),title:"Inline Code","aria-label":"Code","aria-pressed":c.code,children:"</>"})]})]})},mt=({block:t,isSelected:r,isDragging:s,readOnly:c,placeholder:d,onSelect:v,onChange:u,onDelete:x,onDragStart:k,onDragOver:Q,onDrop:W,onDragEnd:O,onKeyDown:h})=>{const U=["uiforge-blocks-editor__block",`uiforge-blocks-editor__block--${t.type}`,r?"uiforge-blocks-editor__block--selected":"",s?"uiforge-blocks-editor__block--dragging":""].filter(Boolean).join(" "),D=["uiforge-blocks-editor__block-text",t.format?.bold?"uiforge-blocks-editor__block-text--bold":"",t.format?.italic?"uiforge-blocks-editor__block-text--italic":"",t.format?.underline?"uiforge-blocks-editor__block-text--underline":"",t.format?.code?"uiforge-blocks-editor__block-text--code":""].filter(Boolean).join(" "),G=N=>{u({content:N.target.value})},E=()=>{const N={value:t.content,onChange:G,onFocus:v,onKeyDown:h,placeholder:d,readOnly:c,className:D};switch(t.type){case"heading1":return e.jsx("input",{...N,type:"text",className:`${D} uiforge-blocks-editor__heading1`,placeholder:d||"Heading 1"});case"heading2":return e.jsx("input",{...N,type:"text",className:`${D} uiforge-blocks-editor__heading2`,placeholder:d||"Heading 2"});case"heading3":return e.jsx("input",{...N,type:"text",className:`${D} uiforge-blocks-editor__heading3`,placeholder:d||"Heading 3"});case"code":return e.jsx("textarea",{...N,className:`${D} uiforge-blocks-editor__code`,placeholder:d||"Code block",rows:4});case"quote":return e.jsx("textarea",{...N,className:`${D} uiforge-blocks-editor__quote`,placeholder:d||"Quote",rows:2});case"image":return e.jsxs("div",{className:"uiforge-blocks-editor__image-block",children:[e.jsx("input",{type:"text",value:t.imageUrl||"",onChange:Z=>u({imageUrl:Z.target.value}),placeholder:"Image URL",className:"uiforge-blocks-editor__image-url",readOnly:c}),e.jsx("input",{type:"text",value:t.imageAlt||"",onChange:Z=>u({imageAlt:Z.target.value}),placeholder:"Alt text",className:"uiforge-blocks-editor__image-alt",readOnly:c}),t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:t.imageAlt||"Block image",className:"uiforge-blocks-editor__image-preview"})]});default:return e.jsx("textarea",{...N,className:`${D} uiforge-blocks-editor__paragraph`,placeholder:d||"Start typing...",rows:1,style:{minHeight:"1.5em"}})}};return e.jsxs("div",{className:U,draggable:!c,onDragStart:k,onDragOver:Q,onDrop:W,onDragEnd:O,"data-block-id":t.id,children:[!c&&e.jsxs("div",{className:"uiforge-blocks-editor__block-controls",children:[e.jsx("button",{type:"button",className:"uiforge-blocks-editor__drag-handle",title:"Drag to reorder","aria-label":"Drag to reorder",children:"â‹®â‹®"}),e.jsx("button",{type:"button",className:"uiforge-blocks-editor__delete-button",onClick:x,title:"Delete block","aria-label":"Delete block",children:"Ã—"})]}),e.jsx("div",{className:"uiforge-blocks-editor__block-content",children:E()})]})},pt=({onAddBlock:t})=>{const[r,s]=l.useState(!1),c=[{type:"paragraph",label:"Paragraph",icon:"Â¶"},{type:"heading1",label:"Heading 1",icon:"H1"},{type:"heading2",label:"Heading 2",icon:"H2"},{type:"heading3",label:"Heading 3",icon:"H3"},{type:"list",label:"List",icon:"â‰¡"},{type:"quote",label:"Quote",icon:'"'},{type:"code",label:"Code",icon:"</>"},{type:"image",label:"Image",icon:"ðŸ–¼"}];return e.jsxs("div",{className:"uiforge-blocks-editor__block-menu",children:[e.jsx("button",{type:"button",className:"uiforge-blocks-editor__add-button",onClick:()=>s(!r),"aria-label":"Add block","aria-expanded":r,children:"+ Add Block"}),r&&e.jsx("div",{className:"uiforge-blocks-editor__block-menu-dropdown",children:c.map(({type:d,label:v,icon:u})=>e.jsxs("button",{type:"button",className:"uiforge-blocks-editor__block-menu-item",onClick:()=>{t(d),s(!1)},children:[e.jsx("span",{className:"uiforge-blocks-editor__block-menu-icon",children:u}),e.jsx("span",{children:v})]},d))})]})};function he(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function vt(t){const r=t.trim(),s=["javascript:","data:","vbscript:","file:"],c=r.toLowerCase();for(const d of s)if(c.startsWith(d))return"";return r}function jt(t){return t.map(r=>{let s=he(r.content);switch(r.format?.bold&&(s=`<strong>${s}</strong>`),r.format?.italic&&(s=`<em>${s}</em>`),r.format?.underline&&(s=`<u>${s}</u>`),r.format?.code&&(s=`<code>${s}</code>`),r.type){case"heading1":return`<h1>${s}</h1>`;case"heading2":return`<h2>${s}</h2>`;case"heading3":return`<h3>${s}</h3>`;case"quote":return`<blockquote>${s}</blockquote>`;case"code":return`<pre><code>${he(r.content)}</code></pre>`;case"image":{const c=vt(r.imageUrl||""),d=he(r.imageAlt||"");return c?`<img src="${c}" alt="${d}" />`:""}case"list":return`<ul><li>${s}</li></ul>`;default:return`<p>${s}</p>`}}).join(`
`)}function bt(t){return t.map(r=>{let s=r.content;switch(r.format?.bold&&(s=`**${s}**`),r.format?.italic&&(s=`*${s}*`),r.format?.code&&(s=`\`${s}\``),r.type){case"heading1":return`# ${s}`;case"heading2":return`## ${s}`;case"heading3":return`### ${s}`;case"quote":return`> ${s}`;case"code":return`\`\`\`
${r.content}
\`\`\``;case"image":return`![${r.imageAlt||""}](${r.imageUrl||""})`;case"list":return`- ${s}`;default:return s}}).join(`

`)}function yt(t){return JSON.stringify(t,null,2)}const kt=({options:t=[],value:r,onChange:s,onSearch:c,placeholder:d="Select an option...",disabled:v=!1,clearable:u=!1,className:x="",renderOption:k,renderValue:Q,loading:W=!1,maxHeight:O="300px",debounceMs:h=300,searchable:U=!0,noOptionsMessage:D="No options found",ariaLabel:G,enableCache:E=!1,cacheTTL:N,refreshOnOpen:Z=!1,onClearCache:ee,onForceRefresh:J})=>{const[C,V]=l.useState(!1),[w,R]=l.useState(""),[H,a]=l.useState([]),[p,f]=l.useState(0),[j,P]=l.useState(!1),F=l.useRef(null),q=l.useRef(null),X=l.useRef(null),se=l.useRef(null),o=l.useRef(null),S=l.useRef(c),g=l.useRef(null),I=l.useRef(!1),T=l.useRef(new Map),B=l.useRef(E),ce=l.useRef(N),m=l.useCallback((i,b=0)=>i.reduce((K,L)=>{const z={...L,level:b};return K.push(z),L.children&&L.children.length>0&&K.push(...m(L.children,b+1)),K},[]),[]),n=i=>typeof i=="string"&&(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("data:")||i.startsWith("/")),y=l.useMemo(()=>m(H.length>0?H:t).find(b=>b.value===r)||null,[r,t,H,m]),M=l.useCallback((i,b)=>{if(!b.trim())return i;const K=b.toLowerCase(),L=z=>z.reduce((Y,ne)=>{const oe=ne.label.toLowerCase().includes(K),ae=ne.children?L(ne.children):[];return(oe||ae.length>0)&&Y.push({...ne,children:ae.length>0?ae:ne.children}),Y},[]);return L(i)},[]);l.useEffect(()=>{S.current=c,o.current=null},[c]),l.useEffect(()=>{B.current=E},[E]),l.useEffect(()=>{ce.current=N},[N]),l.useEffect(()=>{ee&&ee(()=>{T.current.clear()}),J&&J(()=>{if(!S.current)return;g.current&&g.current.abort(),g.current=new AbortController;const i=g.current.signal;P(!0),(async()=>{try{const b=Date.now(),K=w,L=T.current.get(K),z=L&&(!ce.current||b-L.timestamp<ce.current);let Y;B.current&&z?Y=L.data:(Y=await(S.current?S.current(w,i):c?.(w,i)??[]),!i.aborted&&B.current&&T.current.set(K,{data:Y,timestamp:b})),i.aborted||(a(Y),o.current=w)}catch(b){console.error(b),a([])}finally{P(!1)}})()})},[ee,J,w]),l.useEffect(()=>{if(c&&C){const i=o.current===w,b=!I.current&&C;return i&&!(Z&&b)?void 0:(se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{g.current&&g.current.abort(),g.current=new AbortController;const L=g.current.signal;P(!0);try{let z;const Y=w,ne=T.current.get(Y),oe=Date.now(),ae=ne&&(!ce.current||oe-ne.timestamp<ce.current);if(B.current&&ae?z=ne.data:(z=await(S.current?S.current(w,L):c(w,L)),!L.aborted&&B.current&&T.current.set(Y,{data:z,timestamp:oe})),L.aborted)return;a(z),o.current=w}catch(z){console.error("Error fetching options:",z),a([])}finally{P(!1)}},h),()=>{se.current&&clearTimeout(se.current),g.current&&(g.current.abort(),g.current=null)})}else c||a(M(t,w));I.current=C},[w,C,t,h,M,Z]),l.useEffect(()=>{c||a(t)},[t,c]),l.useEffect(()=>{const i=b=>{F.current&&!F.current.contains(b.target)&&(V(!1),R(""))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const _=l.useMemo(()=>m(H.length>0?H:t).filter(b=>!b.disabled),[H,t,m]),te=l.useMemo(()=>m(H.length>0?H:t),[H,t,m]),$=l.useMemo(()=>{const i=new Map;return te.forEach(b=>{const K=JSON.stringify({value:b.value,label:b.label}),L=_.findIndex(z=>z.value===b.value&&z.label===b.label);i.set(K,L)}),i},[te,_]),le=i=>{if(!v)switch(i.key){case"ArrowDown":i.preventDefault(),C?f(b=>b<_.length-1?b+1:0):V(!0);break;case"ArrowUp":i.preventDefault(),C&&f(b=>b>0?b-1:_.length-1);break;case"Enter":i.preventDefault(),C&&_[p]?ie(_[p]):V(!C);break;case"Escape":i.preventDefault(),V(!1),R("");break;case"Tab":C&&(V(!1),R(""));break}};l.useEffect(()=>{if(C&&X.current){const i=X.current.querySelector(`[data-index="${p}"]`);i&&typeof i.scrollIntoView=="function"&&i.scrollIntoView({block:"nearest"})}},[p,C]);const ie=i=>{i.disabled||(s?.(i.value,i),V(!1),R(""),f(0))},re=i=>{i.stopPropagation(),s?.(null,null),R("")},ct=()=>{v||V(i=>{const b=!i;return b&&setTimeout(()=>q.current?.focus(),0),b})};l.useEffect(()=>{C||(o.current=null)},[C]);const it=i=>{R(i.target.value),C||V(!0),f(0)},at=i=>{const b=(i.level||0)*20;return e.jsxs("div",{className:"uiforge-combobox-option-content",style:{paddingLeft:`${b}px`},children:[i.icon&&e.jsx("span",{className:"uiforge-combobox-option-icon",children:n(i.icon)?e.jsx("img",{src:i.icon,alt:"",className:"uiforge-combobox-option-icon-img"}):i.icon}),e.jsx("span",{className:"uiforge-combobox-option-label",children:i.label})]})},ot=i=>i?e.jsxs("div",{className:"uiforge-combobox-value-content",children:[i.icon&&e.jsx("span",{className:"uiforge-combobox-value-icon",children:n(i.icon)?e.jsx("img",{src:i.icon,alt:"",className:"uiforge-combobox-value-icon-img"}):i.icon}),e.jsx("span",{className:"uiforge-combobox-value-label",children:i.label})]}):d,A="uiforge-combobox",dt=[A,C&&`${A}--open`,v&&`${A}--disabled`,x].filter(Boolean).join(" ");return e.jsxs("div",{ref:F,className:dt,onKeyDown:le,role:"combobox","aria-expanded":C,"aria-haspopup":"listbox","aria-label":G,"aria-disabled":v,tabIndex:v?-1:0,children:[e.jsxs("div",{className:`${A}-control`,onClick:ct,children:[U&&C?e.jsx("input",{ref:q,type:"text",className:`${A}-input`,value:w,onChange:it,placeholder:d,disabled:v,"aria-autocomplete":"list","aria-controls":`${A}-listbox`}):e.jsx("div",{className:`${A}-value`,children:Q?Q(y):ot(y)}),e.jsxs("div",{className:`${A}-indicators`,children:[u&&r!==null&&r!==void 0&&!v&&e.jsx("button",{type:"button",className:`${A}-clear`,onClick:re,"aria-label":"Clear selection",tabIndex:-1,children:"Ã—"}),e.jsx("span",{className:`${A}-arrow`,children:"â–¼"})]})]}),C&&e.jsx("div",{ref:X,className:`${A}-dropdown`,style:{maxHeight:O},role:"listbox",id:`${A}-listbox`,children:W||j?e.jsx("div",{className:`${A}-loading`,children:"Loading..."}):_.length===0?e.jsx("div",{className:`${A}-no-options`,children:D}):te.map(i=>{const b=JSON.stringify({value:i.value,label:i.label}),K=$.get(b)??-1,L=i.value===r,z=K===p,Y=[`${A}-option`,L&&`${A}-option--selected`,z&&`${A}-option--highlighted`,i.disabled&&`${A}-option--disabled`].filter(Boolean).join(" ");return e.jsx("div",{className:Y,onClick:()=>ie(i),role:"option","aria-selected":L,"aria-disabled":i.disabled,"data-index":K,children:k?k(i):at(i)},b)})})]})},ve=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M11.93 8.5a4.002 4.002 0 01-7.86 0H.75a.75.75 0 010-1.5h3.32a4.002 4.002 0 017.86 0h3.32a.75.75 0 010 1.5h-3.32zM8 5a3 3 0 100 6 3 3 0 000-6z"})}),je=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"})}),be=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}),e.jsx("path",{d:"M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"})]}),ye=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0114.25 13H8.06l-2.573 2.573A1.458 1.458 0 013 14.543V13H1.75A1.75 1.75 0 010 11.25v-8.5zM1.75 2.5a.25.25 0 00-.25.25v8.5c0 .138.112.25.25.25h2a.75.75 0 01.75.75v2.19l2.72-2.72a.75.75 0 01.53-.22h6.5a.25.25 0 00.25-.25v-8.5a.25.25 0 00-.25-.25H1.75z"})}),ke=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"})}),Ce=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"})}),_e=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M5 3.254V3.25v.005a.75.75 0 110-.005v.004zm.45 1.9a2.25 2.25 0 10-1.95.218v5.256a2.25 2.25 0 101.5 0V7.123A5.735 5.735 0 009.25 9h1.378a2.251 2.251 0 100-1.5H9.25a4.25 4.25 0 01-3.8-2.346zM12.75 9a.75.75 0 100-1.5.75.75 0 000 1.5zm-8.5 4.5a.75.75 0 100-1.5.75.75 0 000 1.5z"})}),we=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"})}),Ie=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M4.53 4.75A.75.75 0 015 6.25h6a.75.75 0 00.53-1.28l-3-3a.75.75 0 00-1.06 0l-3 3zm.47 6.47a.75.75 0 01.53-.22h6a.75.75 0 01.53 1.28l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 01-.01-1.06h.01z"})}),$e=({size:t=20,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",className:r,children:[e.jsx("path",{d:"M10 2L6 6M10 2L14 6M10 2V7.5",stroke:s,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 10H17",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"1 2"}),e.jsx("path",{d:"M10 18L6 14M10 18L14 14M10 18V12.5",stroke:s,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Me=({size:t=20,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",className:r,children:[e.jsx("path",{d:"M10 7.5L6 4M10 7.5L14 4M10 7.5V2",stroke:s,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 10H17",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"1 2"}),e.jsx("path",{d:"M10 12.5L6 16M10 12.5L14 16M10 12.5V18",stroke:s,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Le=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"})}),Ne=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})}),Se=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",className:r,children:[e.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:s,strokeWidth:"1.5"}),e.jsx("path",{d:"M8 1C11.866 1 15 4.134 15 8C15 11.866 11.866 15 8 15",fill:s}),e.jsx("circle",{cx:"8",cy:"5",r:"2",fill:s==="currentColor"?"white":"#fff"}),e.jsx("circle",{cx:"8",cy:"11",r:"2",fill:s}),e.jsx("circle",{cx:"8",cy:"5",r:"0.5",fill:s}),e.jsx("circle",{cx:"8",cy:"11",r:"0.5",fill:s==="currentColor"?"white":"#fff"})]}),Be=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("circle",{cx:"8",cy:"3",r:"1.5"}),e.jsx("path",{d:"M8 5C6.5 5 5 6 5 7.5V9C5 9 5.5 10 6 10.5L5 14H7L8 11L9 14H11L10 10.5C10.5 10 11 9 11 9V7.5C11 6 9.5 5 8 5Z"}),e.jsx("path",{d:"M4 9L2 10M12 9L14 10",strokeWidth:"1",stroke:s,fill:"none"})]}),De=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("circle",{cx:"8",cy:"2.5",r:"1.5"}),e.jsx("path",{d:"M8 4.5L6 8L4 14H6L7 10H9L10 14H12L10 8L8 4.5Z"}),e.jsx("path",{d:"M6 8L3 6M10 8L13 6",strokeWidth:"1.5",stroke:s,fill:"none"})]}),He=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("rect",{x:"1",y:"6",width:"2",height:"4",rx:"0.5"}),e.jsx("rect",{x:"13",y:"6",width:"2",height:"4",rx:"0.5"}),e.jsx("rect",{x:"3",y:"5.5",width:"1",height:"5"}),e.jsx("rect",{x:"12",y:"5.5",width:"1",height:"5"}),e.jsx("rect",{x:"4",y:"7",width:"8",height:"2",rx:"0.5"})]}),Ae=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("circle",{cx:"10",cy:"2.5",r:"1.5"}),e.jsx("path",{d:"M9 4.5L8 6L6 7L4 8L6 9L8 8L10 7L11 9L10 12L9 14H11L12 11L13 9L12 6L10 4.5H9Z"}),e.jsx("path",{d:"M6 14H4L5 11"})]}),Ee=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",className:r,children:e.jsx("path",{d:"M2 8H5L6.5 5L8 11L9.5 8H14",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Ve=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M4 8C4 6 5 4 7 4C8 4 8.5 4.5 8.5 5.5C8.5 6 8.8 6.5 9.5 6.5C10.5 6.5 11 7 11 8C11 9.5 10 11 8 12C6 13 4 12 4 10V8Z"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5"})]}),Re=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("rect",{x:"2",y:"2",width:"12",height:"3",rx:"0.5"}),e.jsx("rect",{x:"2",y:"6.5",width:"12",height:"3",rx:"0.5"}),e.jsx("rect",{x:"2",y:"11",width:"12",height:"3",rx:"0.5"}),e.jsx("circle",{cx:"4",cy:"3.5",r:"0.5"}),e.jsx("circle",{cx:"4",cy:"8",r:"0.5"}),e.jsx("circle",{cx:"4",cy:"12.5",r:"0.5"})]}),Te=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("ellipse",{cx:"8",cy:"3",rx:"5",ry:"2"}),e.jsx("path",{d:"M3 3V13C3 14.1 5.2 15 8 15C10.8 15 13 14.1 13 13V3"}),e.jsx("path",{d:"M3 8C3 9.1 5.2 10 8 10C10.8 10 13 9.1 13 8"})]}),ze=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M4.5 10C2.5 10 1 8.5 1 6.5C1 4.5 2.5 3 4.5 3C4.6 3 4.7 3 4.8 3.05C5.3 1.8 6.5 1 8 1C10 1 11.5 2.5 11.5 4.5C11.5 4.6 11.5 4.7 11.5 4.8C12.9 5.1 14 6.3 14 7.75C14 9.5 12.5 11 10.75 11H4.5Z"})}),Pe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75z"}),e.jsx("path",{d:"M3 5.5L6 8L3 10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("line",{x1:"8",y1:"10.5",x2:"12",y2:"10.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]}),Ue=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M4.75 7.5a3.25 3.25 0 116.5 0v3.75a3.25 3.25 0 01-6.5 0V7.5z"}),e.jsx("path",{d:"M5.75 7.5c0-.69.56-1.25 1.25-1.25h2c.69 0 1.25.56 1.25 1.25M4 5.5L2 4M12 5.5L14 4M4 9H1M15 9H12M4 12L2 13.5M12 12L14 13.5",stroke:s,strokeWidth:"1.5",fill:"none"}),e.jsx("ellipse",{cx:"8",cy:"4",rx:"2.5",ry:"1.5"})]}),We=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M5.28 3.72a.75.75 0 00-1.06 1.06L7.44 8l-3.22 3.22a.75.75 0 101.06 1.06l3.75-3.75a.75.75 0 000-1.06L5.28 3.72zM8.5 11.5a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"})}),Oe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M8 0C6 0 4.5 2 3.5 5L1 7L4 8L5 11L7 8.5C9 7.5 11 6 13 3C14 2 15 0 16 0C16 0 14 2 13 3C11 5 9.5 6.5 8 7.5M10 4C10.552 4 11 3.552 11 3C11 2.448 10.552 2 10 2C9.448 2 9 2.448 9 3C9 3.552 9.448 4 10 4Z"}),e.jsx("path",{d:"M2 12C2 12 0 14 0 16C2 16 4 14 4 14"})]}),Fe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("rect",{x:"6",y:"6",width:"4",height:"4",rx:"0.5"}),e.jsx("path",{d:"M4 4L2 2M4 12L2 14M12 4L14 2M12 12L14 14",strokeWidth:"1.5",stroke:s,strokeLinecap:"round"}),e.jsx("rect",{x:"1",y:"1",width:"1.5",height:"1.5"}),e.jsx("rect",{x:"13.5",y:"1",width:"1.5",height:"1.5"}),e.jsx("rect",{x:"1",y:"13.5",width:"1.5",height:"1.5"}),e.jsx("rect",{x:"13.5",y:"13.5",width:"1.5",height:"1.5"}),e.jsx("circle",{cx:"8",cy:"8",r:"1"})]}),qe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M8 1C4 1 2 3 2 6C2 8 2 10 3 11C3.5 11.5 4 12 5 12C5.5 12 6 11.5 6.5 10.5C7 9.5 7.5 9 8 9C8.5 9 9 9.5 9.5 10.5C10 11.5 10.5 12 11 12C12 12 12.5 11.5 13 11C14 10 14 8 14 6C14 3 12 1 8 1Z"}),e.jsx("ellipse",{cx:"6",cy:"5.5",rx:"1.5",ry:"2",fill:"white"}),e.jsx("ellipse",{cx:"10",cy:"5.5",rx:"1.5",ry:"2",fill:"white"}),e.jsx("circle",{cx:"6",cy:"5.5",r:"0.75",fill:s}),e.jsx("circle",{cx:"10",cy:"5.5",r:"0.75",fill:s})]}),Ke=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("circle",{cx:"8",cy:"8",r:"5"}),e.jsx("ellipse",{cx:"8",cy:"8",rx:"8",ry:"2.5",fill:"none",stroke:s,strokeWidth:"1",opacity:"0.6"}),e.jsx("circle",{cx:"6",cy:"6",r:"1",opacity:"0.4",fill:s==="currentColor"?"white":"#fff"})]}),Ze=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M1 8L6 6L14 2L12 10L10 8L8 14H6L8 8L1 8Z"}),e.jsx("path",{d:"M10 8L12 10",strokeWidth:"1.5",stroke:s})]}),Ge=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M1.5 13.5V2.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5v11a.5.5 0 01-.5.5H2a.5.5 0 01-.5-.5zM5 13.5V5.5a.5.5 0 01.5-.5H6a.5.5 0 01.5.5v8a.5.5 0 01-.5.5h-.5a.5.5 0 01-.5-.5zM8.5 13.5V7.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5v6a.5.5 0 01-.5.5H9a.5.5 0 01-.5-.5zM12 13.5V3.5a.5.5 0 01.5-.5h.5a.5.5 0 01.5.5v10a.5.5 0 01-.5.5h-.5a.5.5 0 01-.5-.5z"})}),Je=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("circle",{cx:"5",cy:"4",r:"2"}),e.jsx("circle",{cx:"11",cy:"4",r:"2"}),e.jsx("path",{d:"M1 14V12C1 10.5 2.5 9 5 9C7.5 9 9 10.5 9 12V14H1Z"}),e.jsx("path",{d:"M7 14V12C7 10.5 8.5 9 11 9C13.5 9 15 10.5 15 12V14H7Z"})]}),Ye=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M3 1.75C3 .784 3.784 0 4.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-8.5A1.75 1.75 0 013 14.25V1.75z"}),e.jsx("path",{d:"M10 0v3.5c0 .275.225.5.5.5H14",fill:s==="currentColor"?"white":"#fff"})]}),Qe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M4.75 0a.75.75 0 01.75.75V2h5V.75a.75.75 0 011.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0113.25 16H2.75A1.75 1.75 0 011 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 014.75 0zM2.5 7.5v6.75c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V7.5h-11z"})}),Xe=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M6.75 0A1.75 1.75 0 005 1.75V3H1.75C.784 3 0 3.784 0 4.75v8.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25v-8.5A1.75 1.75 0 0014.25 3H11V1.75A1.75 1.75 0 009.25 0h-2.5zM9.5 3V1.75a.25.25 0 00-.25-.25h-2.5a.25.25 0 00-.25.25V3h3z"})}),et=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"})}),tt=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M3.25 1A2.25 2.25 0 011 3.25v9.5A2.25 2.25 0 013.25 15h9.5A2.25 2.25 0 0115 12.75v-9.5A2.25 2.25 0 0012.75 1h-9.5zM2.5 3.25a.75.75 0 01.75-.75h9.5a.75.75 0 01.75.75v9.5a.75.75 0 01-.75.75h-9.5a.75.75 0 01-.75-.75v-9.5z"}),e.jsx("path",{d:"M8 4a.75.75 0 01.75.75v2.5h2.5a.75.75 0 010 1.5h-2.5v2.5a.75.75 0 01-1.5 0v-2.5h-2.5a.75.75 0 010-1.5h2.5v-2.5A.75.75 0 018 4z"})]}),st=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M6 1h4v1H6V1zM5.5 3h5L13 13c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2L5.5 3z"}),e.jsx("circle",{cx:"7",cy:"8",r:"1",fill:s==="currentColor"?"white":"#fff",opacity:"0.5"}),e.jsx("circle",{cx:"9",cy:"10",r:"0.75",fill:s==="currentColor"?"white":"#fff",opacity:"0.5"})]}),rt=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("path",{d:"M8 0L0 3v5c0 5 3 7.5 8 8 5-.5 8-3 8-8V3L8 0z"}),e.jsx("path",{d:"M7 10L4.5 7.5l1-1L7 8l3.5-3.5 1 1L7 10z",fill:s==="currentColor"?"white":"#fff"})]}),nt=({size:t=16,className:r="",color:s="currentColor"})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:[e.jsx("rect",{x:"1",y:"1",width:"9",height:"11",rx:"1"}),e.jsx("line",{x1:"3",y1:"4",x2:"7",y2:"4",stroke:s==="currentColor"?"white":"#fff",strokeWidth:"1"}),e.jsx("line",{x1:"3",y1:"6.5",x2:"7",y2:"6.5",stroke:s==="currentColor"?"white":"#fff",strokeWidth:"1"}),e.jsx("circle",{cx:"11",cy:"11",r:"3",fill:"none",stroke:s,strokeWidth:"1.5"}),e.jsx("line",{x1:"13",y1:"13",x2:"15.5",y2:"15.5",stroke:s,strokeWidth:"1.5",strokeLinecap:"round"})]}),lt=({size:t=16,className:r="",color:s="currentColor"})=>e.jsx("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:s,className:r,children:e.jsx("path",{d:"M4.48 7.27c.26.26 1.28 1.33 1.28 1.33l.56-.58-.88-.91 1.69-1.8s-.76-.74-.43-.45c.32-1.19.03-2.51-.87-3.44C4.93.5 3.66.2 2.52.51l1.93 2-.51 1.96-1.89.52-1.93-2C-.19 4.17.1 5.48 1 6.4c.94.98 2.29 1.26 3.48.87zm6.44 1.94l-2.33 2.3 3.84 3.98c.31.33.73.49 1.14.49.41 0 .82-.16 1.14-.49.63-.65.63-1.7 0-2.35l-3.79-3.93zM16 2.53L13.55 0 6.33 7.46l.88.91-4.31 4.46-.99.53-1.39 2.27.35.37 2.2-1.44.51-1.02L7.9 9.08l.88.91L16 2.53z"})}),ge={commit:ve,pr:je,issue:be,comment:ye,star:ke,fork:Ce,merge:_e,release:we,deploy:Ie},me={unfold:$e,fold:Me,close:Le,check:Ne},Ct={taichi:Se,meditation:Be,yoga:De},_t={dumbbell:He,running:Ae,heartrate:Ee,strength:Ve},wt={server:Re,database:Te,cloud:ze,terminal:Pe,bug:Ue,code:We},It={rocket:Oe,satellite:Fe,alien:qe,planet:Ke,telescope:Ze},$t={chart:Ge,meeting:Je,document:Ye,calendar:Qe,briefcase:Xe},Mt={gitbranch:et,prdraft:tt,testing:st,deployment:rt,review:nt,build:lt},Lt=t=>{const r=ge[t]||ge.commit;return e.jsx(r,{size:16})},ue=(t,r=2)=>{if(t.length===0)return[];const s=[];let c=[],d=null;return t.forEach((v,u)=>{d===v.type?c.push(v):(c.length>=r&&d?s.push(pe(c,d)):c.forEach(x=>{s.push({id:x.id.toString(),type:x.type,count:1,title:x.title,timestamp:new Date(x.timestamp),icon:x.icon,events:[x]})}),c=[v],d=v.type),u===t.length-1&&(c.length>=r&&d?s.push(pe(c,d)):c.forEach(x=>{s.push({id:x.id.toString(),type:x.type,count:1,title:x.title,timestamp:new Date(x.timestamp),icon:x.icon,events:[x]})}))}),s},pe=(t,r)=>{const s=t.reduce((u,x)=>{const k=x.metadata?.repository||"unknown";return u[k]||(u[k]=[]),u[k].push(x),u},{}),c=Object.entries(s),d=c.length>1;let v="";if(d)v=`Created ${t.length} ${fe(r)} in ${c.length} repositories`;else{const u=c[0][0];v=`Created ${t.length} ${fe(r)}${u!=="unknown"?` in ${u}`:""}`}return{id:`group-${r}-${t[0].id}`,type:r,count:t.length,title:v,timestamp:new Date(t[0].timestamp),icon:t[0].icon,events:t,children:d?c.map(([u,x])=>({id:`group-${r}-${u}`,type:r,count:x.length,title:`Created ${x.length} ${fe(r)} in ${u}`,timestamp:new Date(x[0].timestamp),icon:x[0].icon,events:x})):void 0}},fe=t=>({pr:"pull requests",issue:"issues",commit:"commits",comment:"comments",star:"stars",fork:"forks",merge:"merges",release:"releases",deploy:"deployments"})[t]||`${t}s`,xe=t=>{if(t.length===0)return[];const r=[];let s=null;return t.forEach((c,d)=>{if("type"in c&&c.type==="date-separator"){r.push(c);return}const u=c.timestamp,x=`${u.getFullYear()}-${u.getMonth()}`;if(x!==s){const k={id:`sep-${d}`,type:"date-separator",date:u,label:Nt(u)};r.push(k),s=x}r.push(c)}),r},Nt=t=>t.toLocaleDateString("en-US",{month:"long",year:"numeric"}),St=t=>{const r=typeof t=="string"?new Date(t):t,c=new Date().getTime()-r.getTime(),d=Math.floor(c/1e3),v=Math.floor(d/60),u=Math.floor(v/60),x=Math.floor(u/24);return d<60?"just now":v<60?`${v}m ago`:u<24?`${u}h ago`:x<30?`${x}d ago`:r.toLocaleDateString()},Bt=({events:t,theme:r="light",className:s="",showLoadMore:c=!0,loading:d=!1,onLoadMore:v,pagination:u,maxHeight:x,showMoreThreshold:k=100,initiallyExpandedAll:Q=!1,emptyMessage:W="No activity to display",onToggleExpand:O,enableGrouping:h=!0,groupingThreshold:U=2,showDateSeparators:D=!0,showTimeline:G=!0,scale:E=1})=>{const[N,Z]=l.useState(()=>{if(!Q)return new Set;const o=new Set;return(h?D?xe(ue(t,U)):ue(t,U):t.map(g=>({id:g.id.toString(),type:g.type,count:1,title:g.title,timestamp:new Date(g.timestamp),icon:g.icon,events:[g]}))).forEach(g=>{if("events"in g&&g.type!=="date-separator"){const I=g;o.add(I.id),I.children&&I.children.forEach(T=>o.add(T.id))}}),o}),[ee,J]=l.useState(!1),C=l.useRef(null),V=l.useRef(null),w=l.useMemo(()=>{if(!h){const S=t.map(g=>({id:g.id.toString(),type:g.type,count:1,title:g.title,timestamp:new Date(g.timestamp),icon:g.icon,events:[g]}));return D?xe(S):S}const o=ue(t,U);return D?xe(o):o},[t,h,U,D]),R=l.useCallback(()=>{if(!V.current||!c||!v)return;const{scrollTop:o,scrollHeight:S,clientHeight:g}=V.current,I=S-o-g;J(I<=k)},[c,v,k]);l.useEffect(()=>{const o=V.current;if(o)return o.addEventListener("scroll",R),R(),()=>{o.removeEventListener("scroll",R)}},[R]);const H=l.useCallback(o=>{Z(S=>{const g=new Set(S),I=g.has(o);return I?g.delete(o):g.add(o),O?.(o,!I),g})},[O]),a=(o,S=!1)=>{const g=N.has(o.id),I=o.children&&o.children.length>0,T=o.count>1;return e.jsxs("div",{className:`activity-stream__item ${S?"activity-stream__item--child":""}`,children:[G&&!S&&e.jsx("div",{className:"activity-stream__timeline-marker"}),e.jsx("div",{className:"activity-stream__icon",children:o.icon||Lt(o.type)}),e.jsxs("div",{className:"activity-stream__content",children:[e.jsxs("div",{className:`activity-stream__header ${T||I?"activity-stream__header--clickable":""}`,onClick:()=>(T||I)&&H(o.id),onKeyDown:B=>{(T||I)&&(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),H(o.id))},role:T||I?"button":void 0,tabIndex:T||I?0:void 0,"aria-expanded":T||I?g:void 0,children:[e.jsx("div",{className:"activity-stream__title",children:o.title}),e.jsx("div",{className:"activity-stream__timestamp",children:St(o.timestamp)}),(T||I)&&e.jsx("div",{className:"activity-stream__toggle",children:g?e.jsx(me.fold,{size:16}):e.jsx(me.unfold,{size:16})})]}),g&&I&&o.children&&e.jsx("div",{className:"activity-stream__children",children:o.children.map(B=>a(B,!0))}),g&&!I&&o.events.length>1&&e.jsx("div",{className:"activity-stream__events-list",children:o.events.map(B=>e.jsxs("div",{className:"activity-stream__event-item",children:[e.jsx("div",{className:"activity-stream__event-title",children:B.title}),B.description&&e.jsx("div",{className:"activity-stream__event-description",children:B.description})]},B.id))}),g&&o.count===1&&o.events[0].description&&e.jsx("div",{className:"activity-stream__description",children:o.events[0].description})]})]},o.id)},p=o=>e.jsxs("div",{className:"activity-stream__date-separator",children:[e.jsx("div",{className:"activity-stream__date-label",children:o.label}),e.jsx("div",{className:"activity-stream__date-line"})]},o.id),f=u?.hasMore!==void 0?u.hasMore:u?.totalItems!==void 0?t.length<u.totalItems:!0,j="activity-stream",P=`${j}--${r}`,F=G?`${j}--with-timeline`:"";let q=`${j} ${P} ${F} ${s}`.trim();E&&E<1&&(q=`${q} ${j}--compact`),E&&E>1&&(q=`${q} ${j}--spacious`);const X=x?{maxHeight:x}:void 0,se={"--activity-stream-scale":E};return e.jsx("div",{ref:C,className:q,"data-theme":r,children:e.jsxs("div",{ref:V,className:"activity-stream__container",style:{...X,...se},children:[w.length===0?e.jsx("div",{className:"activity-stream__empty",children:W}):e.jsx("div",{className:"activity-stream__items",children:w.map(o=>"type"in o&&o.type==="date-separator"?p(o):a(o))}),d&&e.jsxs("div",{className:"activity-stream__loading",children:[e.jsx("div",{className:"activity-stream__spinner"}),e.jsx("span",{children:"Loading..."})]}),c&&!d&&f&&v&&e.jsx("div",{className:`activity-stream__load-more ${ee?"activity-stream__load-more--visible":""}`,onClick:v,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),v())},role:"button",tabIndex:0,"aria-label":"Load more activities",children:"Show more"})]})})};exports.ActivityIcons=ge;exports.AlienIcon=qe;exports.BriefcaseIcon=Xe;exports.BugIcon=Ue;exports.BuildIcon=lt;exports.BusinessIcons=$t;exports.Button=ht;exports.CalendarIcon=Qe;exports.ChartIcon=Ge;exports.CheckIcon=Ne;exports.CloseIcon=Le;exports.CloudIcon=ze;exports.CodeIcon=We;exports.CommentIcon=ye;exports.CommitIcon=ve;exports.DatabaseIcon=Te;exports.DeployIcon=Ie;exports.DeploymentIcon=rt;exports.DevProcessIcons=Mt;exports.DocumentIcon=Ye;exports.DumbbellIcon=He;exports.FitnessIcons=_t;exports.FoldIcon=Me;exports.ForkIcon=Ce;exports.GitBranchIcon=et;exports.HeartRateIcon=Ee;exports.IssueIcon=be;exports.MeditationIcon=Be;exports.MeetingIcon=Je;exports.MergeIcon=_e;exports.PlanetIcon=Ke;exports.PullRequestDraftIcon=tt;exports.PullRequestIcon=je;exports.ReleaseIcon=we;exports.ReviewIcon=nt;exports.RocketIcon=Oe;exports.RunningIcon=Ae;exports.SatelliteIcon=Fe;exports.ServerIcon=Re;exports.SpaceIcons=It;exports.StarIcon=ke;exports.StrengthIcon=Ve;exports.TaiChiIcon=Se;exports.TechIcons=wt;exports.TelescopeIcon=Ze;exports.TerminalIcon=Pe;exports.TestingIcon=st;exports.UIForgeActivityStream=Bt;exports.UIForgeBlocksEditor=xt;exports.UIForgeComboBox=kt;exports.UIForgeGrid=ut;exports.UIIcons=me;exports.UnfoldIcon=$e;exports.WellnessIcons=Ct;exports.YogaIcon=De;exports.blocksToHTML=jt;exports.blocksToJSON=yt;exports.blocksToMarkdown=bt;
